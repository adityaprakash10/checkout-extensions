(()=>{var ne=(t,e,n)=>new Promise((r,i)=>{var o=l=>{try{a(n.next(l))}catch(_){i(_)}},u=l=>{try{a(n.throw(l))}catch(_){i(_)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,u);a((n=n.apply(t,e)).next())});var se,d,We,be,j,Re,ze,Ge,Je,xe,me,ye,At,Q={},Ze=[],Et=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ue=Array.isArray;function M(t,e){for(var n in e)t[n]=e[n];return t}function ke(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Tt(t,e,n){var r,i,o,u={};for(o in e)o=="key"?r=e[o]:o=="ref"?i=e[o]:u[o]=e[o];if(arguments.length>2&&(u.children=arguments.length>3?se.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)u[o]===void 0&&(u[o]=t.defaultProps[o]);return oe(t,u,r,i,null)}function oe(t,e,n,r,i){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i==null?++We:i,__i:-1,__u:0};return i==null&&d.vnode!=null&&d.vnode(o),o}function U(t){return t.children}function W(t,e){this.props=t,this.context=e}function z(t,e){if(e==null)return t.__?z(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?z(t):null}function Ye(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ye(t)}}function je(t){(!t.__d&&(t.__d=!0)&&j.push(t)&&!ie.__r++||Re!=d.debounceRendering)&&((Re=d.debounceRendering)||ze)(ie)}function ie(){for(var t,e,n,r,i,o,u,a=1;j.length;)j.length>a&&j.sort(Ge),t=j.shift(),a=j.length,t.__d&&(n=void 0,r=void 0,i=(r=(e=t).__v).__e,o=[],u=[],e.__P&&((n=M({},r)).__v=r.__v+1,d.vnode&&d.vnode(n),Ce(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,o,i==null?z(r):i,!!(32&r.__u),u),n.__v=r.__v,n.__.__k[n.__i]=n,Xe(o,n,u),r.__e=r.__=null,n.__e!=i&&Ye(n)));ie.__r=0}function Ke(t,e,n,r,i,o,u,a,l,_,c){var s,p,f,x,T,E,h,v=r&&r.__k||Ze,N=e.length;for(l=Pt(n,e,v,l,N),s=0;s<N;s++)(f=n.__k[s])!=null&&(p=f.__i==-1?Q:v[f.__i]||Q,f.__i=s,E=Ce(t,f,p,i,o,u,a,l,_,c),x=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&Se(p.ref,null,f),c.push(f.ref,f.__c||x,f)),T==null&&x!=null&&(T=x),(h=!!(4&f.__u))||p.__k===f.__k?l=Qe(f,l,t,h):typeof f.type=="function"&&E!==void 0?l=E:x&&(l=x.nextSibling),f.__u&=-7);return n.__e=T,l}function Pt(t,e,n,r,i){var o,u,a,l,_,c=n.length,s=c,p=0;for(t.__k=new Array(i),o=0;o<i;o++)(u=e[o])!=null&&typeof u!="boolean"&&typeof u!="function"?(typeof u=="string"||typeof u=="number"||typeof u=="bigint"||u.constructor==String?u=t.__k[o]=oe(null,u,null,null,null):ue(u)?u=t.__k[o]=oe(U,{children:u},null,null,null):u.constructor==null&&u.__b>0?u=t.__k[o]=oe(u.type,u.props,u.key,u.ref?u.ref:null,u.__v):t.__k[o]=u,l=o+p,u.__=t,u.__b=t.__b+1,(_=u.__i=Nt(u,n,l,s))!=-1&&(s--,(a=n[_])&&(a.__u|=2)),a==null||a.__v==null?(_==-1&&(i>c?p--:i<c&&p++),typeof u.type!="function"&&(u.__u|=4)):_!=l&&(_==l-1?p--:_==l+1?p++:(_>l?p--:p++,u.__u|=4))):t.__k[o]=null;if(s)for(o=0;o<c;o++)(a=n[o])!=null&&(2&a.__u)==0&&(a.__e==r&&(r=z(a)),tt(a,a));return r}function Qe(t,e,n,r){var i,o;if(typeof t.type=="function"){for(i=t.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=t,e=Qe(i[o],e,n,r));return e}t.__e!=e&&(r&&(e&&t.type&&!e.parentNode&&(e=z(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Nt(t,e,n,r){var i,o,u,a=t.key,l=t.type,_=e[n],c=_!=null&&(2&_.__u)==0;if(_===null&&a==null||c&&a==_.key&&l==_.type)return n;if(r>(c?1:0)){for(i=n-1,o=n+1;i>=0||o<e.length;)if((_=e[u=i>=0?i--:o++])!=null&&(2&_.__u)==0&&a==_.key&&l==_.type)return u}return-1}function qe(t,e,n){e[0]=="-"?t.setProperty(e,n==null?"":n):t[e]=n==null?"":typeof n!="number"||Et.test(e)?n:n+"px"}function re(t,e,n,r,i){var o,u;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||qe(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||qe(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Je,"$1")),u=e.toLowerCase(),e=u in t||e=="onFocusOut"||e=="onFocusIn"?u.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r?n.u=r.u:(n.u=xe,t.addEventListener(e,o?ye:me,o)):t.removeEventListener(e,o?ye:me,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n==null?"":n;break e}catch(a){}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Be(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=xe++;else if(e.t<n.u)return;return n(d.event?d.event(e):e)}}}function Ce(t,e,n,r,i,o,u,a,l,_){var c,s,p,f,x,T,E,h,v,N,y,S,w,L,H,$,R,P=e.type;if(e.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),o=[a=e.__e=n.__e]),(c=d.__b)&&c(e);e:if(typeof P=="function")try{if(h=e.props,v="prototype"in P&&P.prototype.render,N=(c=P.contextType)&&r[c.__c],y=c?N?N.props.value:c.__:r,n.__c?E=(s=e.__c=n.__c).__=s.__E:(v?e.__c=s=new P(h,y):(e.__c=s=new W(h,y),s.constructor=P,s.render=Ut),N&&N.sub(s),s.state||(s.state={}),s.__n=r,p=s.__d=!0,s.__h=[],s._sb=[]),v&&s.__s==null&&(s.__s=s.state),v&&P.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=M({},s.__s)),M(s.__s,P.getDerivedStateFromProps(h,s.__s))),f=s.props,x=s.state,s.__v=e,p)v&&P.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),v&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(v&&P.getDerivedStateFromProps==null&&h!==f&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(h,y),e.__v==n.__v||!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(h,s.__s,y)===!1){for(e.__v!=n.__v&&(s.props=h,s.state=s.__s,s.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(F){F&&(F.__=e)}),S=0;S<s._sb.length;S++)s.__h.push(s._sb[S]);s._sb=[],s.__h.length&&u.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(h,s.__s,y),v&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(f,x,T)})}if(s.context=y,s.props=h,s.__P=t,s.__e=!1,w=d.__r,L=0,v){for(s.state=s.__s,s.__d=!1,w&&w(e),c=s.render(s.props,s.state,s.context),H=0;H<s._sb.length;H++)s.__h.push(s._sb[H]);s._sb=[]}else do s.__d=!1,w&&w(e),c=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++L<25);s.state=s.__s,s.getChildContext!=null&&(r=M(M({},r),s.getChildContext())),v&&!p&&s.getSnapshotBeforeUpdate!=null&&(T=s.getSnapshotBeforeUpdate(f,x)),$=c,c!=null&&c.type===U&&c.key==null&&($=et(c.props.children)),a=Ke(t,ue($)?$:[$],e,n,r,i,o,u,a,l,_),s.base=e.__e,e.__u&=-161,s.__h.length&&u.push(s),E&&(s.__E=s.__=null)}catch(F){if(e.__v=null,l||o!=null)if(F.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,e.__e=a}else{for(R=o.length;R--;)ke(o[R]);ge(e)}else e.__e=n.__e,e.__k=n.__k,F.then||ge(e);d.__e(F,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):a=e.__e=Lt(n.__e,e,n,r,i,o,u,l,_);return(c=d.diffed)&&c(e),128&e.__u?void 0:a}function ge(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(ge)}function Xe(t,e,n){for(var r=0;r<n.length;r++)Se(n[r],n[++r],n[++r]);d.__c&&d.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(o){o.call(i)})}catch(o){d.__e(o,i.__v)}})}function et(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:ue(t)?t.map(et):M({},t)}function Lt(t,e,n,r,i,o,u,a,l){var _,c,s,p,f,x,T,E=n.props||Q,h=e.props,v=e.type;if(v=="svg"?i="http://www.w3.org/2000/svg":v=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(_=0;_<o.length;_++)if((f=o[_])&&"setAttribute"in f==!!v&&(v?f.localName==v:f.nodeType==3)){t=f,o[_]=null;break}}if(t==null){if(v==null)return document.createTextNode(h);t=document.createElementNS(i,v,h.is&&h),a&&(d.__m&&d.__m(e,o),a=!1),o=null}if(v==null)E===h||a&&t.data==h||(t.data=h);else{if(o=o&&se.call(t.childNodes),!a&&o!=null)for(E={},_=0;_<t.attributes.length;_++)E[(f=t.attributes[_]).name]=f.value;for(_ in E)if(f=E[_],_!="children"){if(_=="dangerouslySetInnerHTML")s=f;else if(!(_ in h)){if(_=="value"&&"defaultValue"in h||_=="checked"&&"defaultChecked"in h)continue;re(t,_,null,f,i)}}for(_ in h)f=h[_],_=="children"?p=f:_=="dangerouslySetInnerHTML"?c=f:_=="value"?x=f:_=="checked"?T=f:a&&typeof f!="function"||E[_]===f||re(t,_,f,E[_],i);if(c)a||s&&(c.__html==s.__html||c.__html==t.innerHTML)||(t.innerHTML=c.__html),e.__k=[];else if(s&&(t.innerHTML=""),Ke(e.type=="template"?t.content:t,ue(p)?p:[p],e,n,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,u,o?o[0]:n.__k&&z(n,0),a,l),o!=null)for(_=o.length;_--;)ke(o[_]);a||(_="value",v=="progress"&&x==null?t.removeAttribute("value"):x!=null&&(x!==t[_]||v=="progress"&&!x||v=="option"&&x!=E[_])&&re(t,_,x,E[_],i),_="checked",T!=null&&T!=t[_]&&re(t,_,T,E[_],i))}return t}function Se(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){d.__e(i,n)}}function tt(t,e,n){var r,i;if(d.unmount&&d.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||Se(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){d.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&tt(r[i],e,n||typeof t.type!="function");n||ke(t.__e),t.__c=t.__=t.__e=void 0}function Ut(t,e,n){return this.constructor(t,n)}function nt(t,e,n){var r,i,o,u;e==document&&(e=document.documentElement),d.__&&d.__(t,e),i=(r=typeof n=="function")?null:n&&n.__k||e.__k,o=[],u=[],Ce(e,t=(!r&&n||e).__k=Tt(U,null,[t]),i||Q,Q,e.namespaceURI,!r&&n?[n]:i?null:e.firstChild?se.call(e.childNodes):null,o,!r&&n?n:i?i.__e:e.firstChild,r,u),Xe(o,t,u)}se=Ze.slice,d={__e:function(t,e,n,r){for(var i,o,u;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(t)),u=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),u=i.__d),u)return i.__E=i}catch(a){t=a}throw t}},We=0,be=function(t){return t!=null&&t.constructor==null},W.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=M({},this.state),typeof t=="function"&&(t=t(M({},n),this.props)),t&&M(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),je(this))},W.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),je(this))},W.prototype.render=U,j=[],ze=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ge=function(t,e){return t.__v.__b-e.__v.__b},ie.__r=0,Je=/(PointerCapture)$|Capture$/i,xe=0,me=Be(!1),ye=Be(!0),At=0;var X,k,we,rt,Ae=0,ft=[],A=d,ot=A.__b,it=A.__r,st=A.diffed,ut=A.__c,_t=A.unmount,at=A.__;function Te(t,e){A.__h&&A.__h(k,t,Ae||e),Ae=0;var n=k.__H||(k.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function D(t){return Ae=1,Dt(dt,t)}function Dt(t,e,n){var r=Te(X++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):dt(void 0,e),function(a){var l=r.__N?r.__N[0]:r.__[0],_=r.t(l,a);l!==_&&(r.__N=[_,r.__[1]],r.__c.setState({}))}],r.__c=k,!k.__f)){var i=function(a,l,_){if(!r.__c.__H)return!0;var c=r.__c.__H.__.filter(function(p){return!!p.__c});if(c.every(function(p){return!p.__N}))return!o||o.call(this,a,l,_);var s=r.__c.props!==a;return c.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(s=!0)}}),o&&o.call(this,a,l,_)||s};k.__f=!0;var o=k.shouldComponentUpdate,u=k.componentWillUpdate;k.componentWillUpdate=function(a,l,_){if(this.__e){var c=o;o=void 0,i(a,l,_),o=c}u&&u.call(this,a,l,_)},k.shouldComponentUpdate=i}return r.__N||r.__}function G(t,e){var n=Te(X++,3);!A.__s&&pt(n.__H,e)&&(n.__=t,n.u=e,k.__H.__h.push(n))}function ct(t,e){var n=Te(X++,7);return pt(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Ht(){for(var t;t=ft.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(_e),t.__H.__h.forEach(Ee),t.__H.__h=[]}catch(e){t.__H.__h=[],A.__e(e,t.__v)}}A.__b=function(t){k=null,ot&&ot(t)},A.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),at&&at(t,e)},A.__r=function(t){it&&it(t),X=0;var e=(k=t.__c).__H;e&&(we===k?(e.__h=[],k.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(_e),e.__h.forEach(Ee),e.__h=[],X=0)),we=k},A.diffed=function(t){st&&st(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(ft.push(e)!==1&&rt===A.requestAnimationFrame||((rt=A.requestAnimationFrame)||$t)(Ht)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),we=k=null},A.__c=function(t,e){e.some(function(n){try{n.__h.forEach(_e),n.__h=n.__h.filter(function(r){return!r.__||Ee(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],A.__e(r,n.__v)}}),ut&&ut(t,e)},A.unmount=function(t){_t&&_t(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{_e(r)}catch(i){e=i}}),n.__H=void 0,e&&A.__e(e,n.__v))};var lt=typeof requestAnimationFrame=="function";function $t(t){var e,n=function(){clearTimeout(r),lt&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,35);lt&&(e=requestAnimationFrame(n))}function _e(t){var e=k,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),k=e}function Ee(t){var e=k;t.__c=t.__(),k=e}function pt(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function dt(t,e){return typeof e=="function"?e(t):e}var Ft=Symbol.for("preact-signals");function le(){if(V>1)V--;else{for(var t,e=!1;ee!==void 0;){var n=ee;for(ee=void 0,Pe++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&vt(n))try{n.c()}catch(i){e||(t=i,e=!0)}n=r}}if(Pe=0,V--,e)throw t}}function Ne(t){if(V>0)return t();V++;try{return t()}finally{le()}}var m=void 0;function Le(t){var e=m;m=void 0;try{return t()}finally{m=e}}var ee=void 0,V=0,Pe=0,ae=0;function ht(t){if(m!==void 0){var e=t.n;if(e===void 0||e.t!==m)return e={i:0,S:t,p:m.s,n:void 0,t:m,e:void 0,x:void 0,r:e},m.s!==void 0&&(m.s.n=e),m.s=e,t.n=e,32&m.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=m.s,e.n=void 0,m.s.n=e,m.s=e),e}}function C(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}C.prototype.brand=Ft;C.prototype.h=function(){return!0};C.prototype.S=function(t){var e=this,n=this.t;n!==t&&t.e===void 0&&(t.x=n,this.t=t,n!==void 0?n.e=t:Le(function(){var r;(r=e.W)==null||r.call(e)}))};C.prototype.U=function(t){var e=this;if(this.t!==void 0){var n=t.e,r=t.x;n!==void 0&&(n.x=r,t.e=void 0),r!==void 0&&(r.e=n,t.x=void 0),t===this.t&&(this.t=r,r===void 0&&Le(function(){var i;(i=e.Z)==null||i.call(e)}))}};C.prototype.subscribe=function(t){var e=this;return B(function(){var n=e.value,r=m;m=void 0;try{t(n)}finally{m=r}},{name:"sub"})};C.prototype.valueOf=function(){return this.value};C.prototype.toString=function(){return this.value+""};C.prototype.toJSON=function(){return this.value};C.prototype.peek=function(){var t=m;m=void 0;try{return this.value}finally{m=t}};Object.defineProperty(C.prototype,"value",{get:function(){var t=ht(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(Pe>100)throw new Error("Cycle detected");this.v=t,this.i++,ae++,V++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{le()}}}});function fe(t,e){return new C(t,e)}function vt(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function mt(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function yt(t){for(var e=t.s,n=void 0;e!==void 0;){var r=e.p;e.i===-1?(e.S.U(e),r!==void 0&&(r.n=e.n),e.n!==void 0&&(e.n.p=r)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=r}t.s=n}function q(t,e){C.call(this,void 0),this.x=t,this.s=void 0,this.g=ae-1,this.f=4,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}q.prototype=new C;q.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===ae))return!0;if(this.g=ae,this.f|=1,this.i>0&&!vt(this))return this.f&=-2,!0;var t=m;try{mt(this),m=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return m=t,yt(this),this.f&=-2,!0};q.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}C.prototype.S.call(this,t)};q.prototype.U=function(t){if(this.t!==void 0&&(C.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};q.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(q.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=ht(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function ce(t,e){return new q(t,e)}function gt(t){var e=t.u;if(t.u=void 0,typeof e=="function"){V++;var n=m;m=void 0;try{e()}catch(r){throw t.f&=-2,t.f|=8,Ue(t),r}finally{m=n,le()}}}function Ue(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,gt(t)}function It(t){if(m!==this)throw new Error("Out-of-order effect");yt(this),m=t,this.f&=-2,8&this.f&&Ue(this),le()}function J(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e==null?void 0:e.name}J.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};J.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,gt(this),mt(this),V++;var t=m;return m=this,It.bind(this,t)};J.prototype.N=function(){2&this.f||(this.f|=2,this.o=ee,ee=this)};J.prototype.d=function(){this.f|=8,1&this.f||Ue(this)};J.prototype.dispose=function(){this.d()};function B(t,e){var n=new J(t,e);try{n.c()}catch(i){throw n.d(),i}var r=n.d.bind(n);return r[Symbol.dispose]=r,r}var bt,He,De,de=typeof window!="undefined"&&!!window.__PREACT_SIGNALS_DEVTOOLS__;var xt=[];B(function(){bt=this.N})();function Z(t,e){d[t]=e.bind(null,d[t]||function(){})}function pe(t){De&&De(),De=t&&t.S()}function kt(t){var e=this,n=t.data,r=Ot(n);r.value=n;var i=ct(function(){for(var a=e,l=e.__v;l=l.__;)if(l.__c){l.__c.__$f|=4;break}var _=ce(function(){var f=r.value.value;return f===0?0:f===!0?"":f||""}),c=ce(function(){return!Array.isArray(_.value)&&!be(_.value)}),s=B(function(){if(this.N=Ct,c.value){var f=_.value;a.__v&&a.__v.__e&&a.__v.__e.nodeType===3&&(a.__v.__e.data=f)}}),p=e.__$u.d;return e.__$u.d=function(){s(),p.call(this)},[c,_]},[]),o=i[0],u=i[1];return o.value?u.peek():u.value}kt.displayName="ReactiveTextNode";Object.defineProperties(C.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:kt},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});Z("__b",function(t,e){if(de&&typeof e.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),typeof e.type=="string"){var n,r=e.props;for(var i in r)if(i!=="children"){var o=r[i];o instanceof C&&(n||(e.__np=n={}),n[i]=o,r[i]=o.peek())}}t(e)});Z("__r",function(t,e){if(de&&typeof e.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(e),e.type!==U){pe();var n,r=e.__c;r&&(r.__$f&=-2,(n=r.__$u)===void 0&&(r.__$u=n=(function(i){var o;return B(function(){o=this}),o.c=function(){r.__$f|=1,r.setState({})},o})())),He=r,pe(n)}t(e)});Z("__e",function(t,e,n,r){de&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),pe(),He=void 0,t(e,n,r)});Z("diffed",function(t,e){de&&typeof e.type=="function"&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),pe(),He=void 0;var n;if(typeof e.type=="string"&&(n=e.__e)){var r=e.__np,i=e.props;if(r){var o=n.U;if(o)for(var u in o){var a=o[u];a!==void 0&&!(u in r)&&(a.d(),o[u]=void 0)}else o={},n.U=o;for(var l in r){var _=o[l],c=r[l];_===void 0?(_=Mt(n,l,c,i),o[l]=_):_.o(c,i)}}}t(e)});function Mt(t,e,n,r){var i=e in t&&t.ownerSVGElement===void 0,o=fe(n);return{o:function(u,a){o.value=u,r=a},d:B(function(){this.N=Ct;var u=o.value.value;r[e]!==u&&(r[e]=u,i?t[e]=u:u!=null&&(u!==!1||e[4]==="-")?t.setAttribute(e,u):t.removeAttribute(e))})}}Z("unmount",function(t,e){if(typeof e.type=="string"){var n=e.__e;if(n){var r=n.U;if(r){n.U=void 0;for(var i in r){var o=r[i];o&&o.d()}}}}else{var u=e.__c;if(u){var a=u.__$u;a&&(u.__$u=void 0,a.d())}}t(e)});Z("__h",function(t,e,n,r){(r<3||r===9)&&(e.__$f|=2),t(e,n,r)});W.prototype.shouldComponentUpdate=function(t,e){var n=this.__$u,r=n&&n.s!==void 0;for(var i in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var o=2&this.__$f;if(!(r||o||4&this.__$f)||1&this.__$f)return!0}else if(!(r||4&this.__$f)||3&this.__$f)return!0;for(var u in t)if(u!=="__source"&&t[u]!==this.props[u])return!0;for(var a in this.props)if(!(a in t))return!0;return!1};function Ot(t,e){return D(function(){return fe(t,e)})[0]}var Vt=function(t){queueMicrotask(function(){queueMicrotask(t)})};function Rt(){Ne(function(){for(var t;t=xt.shift();)bt.call(t)})}function Ct(){xt.push(this)===1&&(d.requestAnimationFrame||Vt)(Rt)}var $e=globalThis.shopify;$e&&typeof $e.setSignals=="function"&&$e.setSignals(C);var he=class extends Error{constructor(...e){super(...e),this.name="CheckoutUIExtensionError"}};var Y=class extends Error{constructor(e,n){super(`Cannot call '${e}()' on target '${n}'. The corresponding property was not found on the API.`),this.name="ExtensionHasNoMethodError"}};function O(t){let e=globalThis==null?void 0:globalThis.shopify;if(!e)throw new he("You can only call this hook when running as a checkout UI extension on at least API version 2025-10.");return e}function St(t){let[,e]=D(t.value);return G(()=>{let n=!1,r=o=>{n||e(o)},i=t.subscribe(r);return r(t.value),()=>{n=!0,i()}},[t]),t.value}function Fe(){let t=O();if("applyAttributeChange"in t)return t.applyAttributeChange;throw new Y("applyAttributeChange",t.extension.target)}function Ie(){let t=O();if("applyCartLinesChange"in t)return t.applyCartLinesChange;throw new Y("applyCartLinesChange",t.extension.target)}function Me(){return St(O().settings)}var jt=0;function g(t,e,n,r,i,o){e||(e={});var u,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?u=e[a]:l[a]=e[a];var _={type:t,props:l,key:n,ref:u,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--jt,__i:-1,__u:0,__source:i,__self:o};if(typeof t=="function"&&(u=t.defaultProps))for(a in u)l[a]===void 0&&(l[a]=u[a]);return d.vnode&&d.vnode(_),_}var wt=()=>ne(null,null,function*(){nt(g(qt,{}),document.body)});function qt(){var N;let t=Me(),{query:e}=O(),n=Ie(),r=Fe(),[i,o]=D([]),[u,a]=D(null),[l,_]=D(null),[c,s]=D(null),[p,f]=D(null),x=[t.upsell_variant_1,t.upsell_variant_2,t.upsell_variant_3].filter(Boolean),T=(N=t.upsell_discount_percent)!=null?N:0;G(()=>{T&&r({type:"updateAttribute",key:"upsell_discount_percent",value:String(T)})},[T]),G(()=>{x.length&&ne(null,null,function*(){let y=yield e(`
        query ($ids: [ID!]!) {
          nodes(ids: $ids) {
            ... on ProductVariant {
              product {
                id
                title
                images(first: 1) {
                  nodes { url }
                }
                variants(first: 50) {
                  nodes {
                    id
                    title
                    image {
                      url
                    }
                    price {
                      amount
                      currencyCode
                    }
                  }
                }
              }
            }
          }
        }
        `,{variables:{ids:x}}),S=new Map;y.data.nodes.forEach(w=>{S.has(w.product.id)||S.set(w.product.id,w.product)}),o(Array.from(S.values()))})},[x]);function E(){return ne(this,null,function*(){l&&(yield n({type:"addCartLine",merchandiseId:l,quantity:1,attributes:[{key:"upsell",value:"true"}]}),_(null),s(null),f(null),a(null))})}function h(y){let S=y.split(" / ");return{color:S[0]||null,size:S[1]||null}}function v(y,S,w){var L,H;return!y||!S||!w?null:(H=(L=y.variants)==null?void 0:L.nodes)==null?void 0:H.find($=>{let R=h($.title);return R.color===S&&R.size===w})}return i.length?g(U,{children:[g("s-stack",{children:[g("s-heading",{children:["You might also like (",T,"% OFF)"]}),g("s-grid",{gridTemplateColumns:"repeat(3, 1fr)",gap:"base",children:i.map(y=>{var w,L;let S=(L=(w=y.images)==null?void 0:w.nodes)==null?void 0:L[0];return g("s-stack",{padding:"base",children:[S&&g("s-image",{src:S.url,alt:y.title}),g("s-text",{children:y.title}),g("s-button",{variant:"secondary",command:"--show",commandFor:"upsell-modal",onClick:()=>{a(y.id),s(null),f(null),_(null)},children:"Add"})]},y.id)})})]}),g("s-modal",{id:"upsell-modal",size:"large",accessibilityLabel:"Select variant",children:u&&(()=>{var F,Oe,Ve;let y=i.find(b=>b.id===u);if(!y)return null;let S=(Oe=(F=y.images)==null?void 0:F.nodes)==null?void 0:Oe[0],w=((Ve=y.variants)==null?void 0:Ve.nodes)||[],L=[...new Set(w.map(b=>h(b.title).color).filter(Boolean))],H=[...new Set(w.map(b=>h(b.title).size).filter(Boolean))];function $(b){var K;let I=w.find(te=>h(te.title).color===b);return((K=I==null?void 0:I.image)==null?void 0:K.url)||null}let P=(c&&p?v(y,c,p):null)||w[0];return g("s-grid",{gridTemplateColumns:"1fr 1.2fr",gap:"large",children:[g("s-stack",{children:S&&g("s-image",{src:S.url,alt:y.title,border:"base",borderRadius:"large"})}),g("s-stack",{gap:"base",children:[g("s-stack",{paddingBlockEnd:"base",borderWidth:"none none base none",children:[g("s-text",{children:y.title}),P&&g("s-text",{type:"small",color:"subdued",children:["$",P.price.amount]})]}),g("s-text",{children:["Color: ",c]}),g("s-stack",{direction:"inline",gap:"base",alignItems:"start",children:L.map(b=>{let I=$(b),K=c===b,te=()=>{if(s(b),p){let ve=v(y,b,p);_(ve?ve.id:null)}else _(null)};return I?g("s-clickable",{onClick:te,border:K?"base":"none",padding:"none",accessibilityLabel:`Select color ${b}`,inlineSize:"80px",children:g("s-image",{src:I,alt:b,inlineSize:"fill",aspectRatio:"1/1"})},b):g("s-button",{variant:K?"primary":"secondary",onClick:te,children:b},b)})}),g("s-text",{children:["Size : ",p]}),g("s-stack",{direction:"inline",gap:"base",children:H.map(b=>g("s-button",{variant:p===b?"primary":"secondary",onClick:()=>{if(f(b),c){let I=v(y,c,b);_(I?I.id:null)}else _(null)},children:b},b))}),g("s-button",{slot:"primary-action",variant:"primary",disabled:!l,onClick:E,tone:"neutral",inlineSize:"fill",children:"Select a size"})]})]})})()})]}):g("s-text",{children:"No upsell products configured"})}shopify.extend("purchase.checkout.block.render",(...t)=>wt(...t));})();
//# sourceMappingURL=upsell-addition.js.map
